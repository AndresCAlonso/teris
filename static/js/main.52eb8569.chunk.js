(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{10:function(e,t,a){e.exports=a(26)},15:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(9),i=a.n(c),o=(a(15),a(0)),u=a(2),s=a(3),b=30,l=30,d=10,O=24,f=20,j={SQUARE:{color:"#F0F000",type:"SQUARE",initialPlacement:{a:[-1,4],b:[-1,5],c:[0,4],d:[0,5]},orientation:"UP",rotation:function(e,t){return[e,t]}},RIGHT_L:{color:"#EF9F00",type:"RIGHT_L",initialPlacement:{a:[-1,6],b:[0,4],c:[0,5],d:[0,6]},orientation:"UP",rotation:function(e,t){if("UP"===t){var a=e.a,r=e.b,n=e.c,c=e.d,i=Object(o.a)(r,2),u=i[0],s=i[1],b=Object(o.a)(n,2);return[{a:a,b:[u-1,s+1],c:[b[0]+1,b[1]+1],d:c},"LEFT"]}if("LEFT"===t){var l=e.a,d=e.b,O=e.c,f=e.d,j=Object(o.a)(l,2),v=j[0],p=j[1],m=Object(o.a)(d,2),E=m[0],P=m[1],y=Object(o.a)(O,2);return[{a:[v+1,p-1],b:[E+2,P],c:[y[0]-1,y[1]+1],d:f},"DOWN"]}if("DOWN"===t){var T=e.a,L=e.b,h=e.c,A=e.d,w=Object(o.a)(T,2),g=w[0],R=w[1],I=Object(o.a)(L,2),C=I[0],x=I[1],N=Object(o.a)(h,2);return[{a:[g+1,R+1],b:[C,x+2],c:[N[0]-1,N[1]-1],d:A},"RIGHT"]}if("RIGHT"===t){var S=e.a,D=e.b,_=e.c,F=e.d,H=Object(o.a)(S,2),k=H[0],U=H[1],Z=Object(o.a)(D,2),K=Z[0],G=Z[1],V=Object(o.a)(_,2);return[{a:[k-2,U],b:[K-1,G-3],c:[V[0]+1,V[1]-1],d:F},"UP"]}return[e,t]}},LEFT_L:{color:"#0000F0",type:"LEFT_L",initialPlacement:{a:[-1,4],b:[0,4],c:[0,5],d:[0,6]},orientation:"UP",rotation:function(e,t){if("UP"===t){var a=e.a,r=e.b,n=e.c,c=e.d,i=Object(o.a)(n,2),u=i[0],s=i[1],b=Object(o.a)(c,2);return[{a:a,b:r,c:[u,s-2],d:[b[0]-2,b[1]-2]},"LEFT"]}if("LEFT"===t){var l=e.a,d=e.b,O=e.c,f=e.d,j=Object(o.a)(l,2),v=j[0],p=j[1],m=Object(o.a)(O,2),E=m[0],P=m[1],y=Object(o.a)(f,2);return[{a:[v+1,p-1],b:d,c:[E+1,P+1],d:[y[0]+2,y[1]-2]},"DOWN"]}if("DOWN"===t){var T=e.a,L=e.b,h=e.c,A=e.d,w=Object(o.a)(T,2),g=w[0],R=w[1],I=Object(o.a)(h,2),C=I[0],x=I[1],N=Object(o.a)(A,2);return[{a:[g+1,R+1],b:L,c:[C-1,x+1],d:[N[0]+2,N[1]+2]},"RIGHT"]}if("RIGHT"===t){var S=e.a,D=e.b,_=e.c,F=e.d,H=Object(o.a)(S,2),k=H[0],U=H[1],Z=Object(o.a)(F,2);return[{a:[k-2,U],b:D,c:_,d:[Z[0]-2,Z[1]+2]},"UP"]}return[e,t]}},LINE:{color:"#00F0F0",type:"LINE",initialPlacement:{a:[-1,4],b:[-1,5],c:[-1,6],d:[-1,7]},orientation:"HORIZONTAL",rotation:function(e,t){if("VERTICAL"===t){var a=e.a,r=e.b,n=e.c,c=e.d,i=Object(o.a)(a,2),u=i[0],s=i[1],b=Object(o.a)(n,2),l=b[0],d=b[1],O=Object(o.a)(c,2);return[{a:[u+1,s-1],b:r,c:[l-1,d+1],d:[O[0]-2,O[1]+2]},"HORIZONTAL"]}if("HORIZONTAL"===t){var f=e.a,j=e.b,v=e.c,p=e.d,m=Object(o.a)(f,2),E=m[0],P=m[1],y=Object(o.a)(v,2),T=y[0],L=y[1],h=Object(o.a)(p,2);return[{a:[E-1,P+1],b:j,c:[T+1,L-1],d:[h[0]+2,h[1]-2]},"VERTICAL"]}return[e,t]}},Z:{color:"#007800",type:"Z",initialPlacement:{a:[-1,5],b:[-1,6],c:[0,4],d:[0,5]},orientation:"HORIZONTAL",rotation:function(e,t){if("HORIZONTAL"===t){var a=e.a,r=e.b,n=e.c,c=e.d,i=Object(o.a)(a,2),u=i[0],s=i[1],b=Object(o.a)(r,2),l=b[0],d=b[1],O=Object(o.a)(n,2);return[{a:[u+1,s-1],b:[l,d-2],c:[O[0]+1,O[1]+1],d:c},"VERTICAL"]}if("VERTICAL"===t){var f=e.a,j=e.b,v=e.c,p=e.d,m=Object(o.a)(f,2),E=m[0],P=m[1],y=Object(o.a)(j,2),T=y[0],L=y[1],h=Object(o.a)(v,2);return[{a:[E-1,P+1],b:[T,L+2],c:[h[0]-1,h[1]-1],d:p},"HORIZONTAL"]}return[e,t]}},REV_Z:{color:"#780000",type:"REV_Z",initialPlacement:{a:[-1,4],b:[-1,5],c:[0,5],d:[0,6]},orientation:"HORIZONTAL",rotation:function(e,t){if("HORIZONTAL"===t){var a=e.a,r=e.b,n=e.c,c=e.d,i=Object(o.a)(a,2),u=i[0],s=i[1],b=Object(o.a)(r,2),l=b[0],d=b[1],O=Object(o.a)(c,2);return[{a:[u+2,s],b:[l+1,d-1],c:n,d:[O[0]-1,O[1]-1]},"VERTICAL"]}if("VERTICAL"===t){var f=e.a,j=e.b,v=e.c,p=e.d,m=Object(o.a)(f,2),E=m[0],P=m[1],y=Object(o.a)(j,2),T=y[0],L=y[1],h=Object(o.a)(p,2);return[{a:[E-2,P],b:[T-1,L+1],c:v,d:[h[0]+1,h[1]+1]},"HORIZONTAL"]}return[e,t]}},T:{color:"#A000F0",type:"T",initialPlacement:{a:[-1,5],b:[0,4],c:[0,5],d:[0,6]},orientation:"UP",rotation:function(e,t){if("UP"===t){var a=Object(o.a)(e.d,2),r=a[0],n=a[1];return[Object(s.a)({},e,{d:[r+1,n-1]}),"LEFT"]}if("LEFT"===t){var c=Object(o.a)(e.a,2),i=c[0],u=c[1];return[Object(s.a)({},e,{a:[i+1,u+1]}),"DOWN"]}if("DOWN"===t){var b=Object(o.a)(e.b,2),l=b[0],d=b[1];return[Object(s.a)({},e,{b:[l-1,d+1]}),"RIGHT"]}if("RIGHT"===t){var O=e.a,f=e.b,j=e.c,v=e.d,p=Object(o.a)(O,2),m=p[0],E=p[1],P=Object(o.a)(f,2),y=P[0],T=P[1],L=Object(o.a)(v,2);return[{a:[m-1,E-1],b:[y+1,T-1],c:j,d:[L[0]-1,L[1]+1]},"UP"]}}}},v={color:"transparent"},p=a(4),m=a.n(p),E=function(e){var t=e.board,a=e.moveCoordinates,r=e.allPieceCoordinates,n=Object(o.a)(a,2),c=n[0],i=n[1];return c<0||c>=O||i<0||i>=d||t[c][i]!==v&&!r.some((function(e){var t=Object(o.a)(e,2),a=t[0],r=t[1];return c===a&&i===r}))},P=function(e){var t=Object(r.useState)(!1),a=Object(o.a)(t,2),n=a[0],c=a[1],i=function(t){return e===t.code},u=m()((function(e){i(e)&&c(!0)})),s=m()((function(e){i(e)&&c(!1)}));return Object(r.useEffect)((function(){return window.addEventListener("keydown",u),window.addEventListener("keyup",s),function(){window.removeEventListener("keydown",u),window.removeEventListener("keyup",s)}}),[]),n},y=function(e){var t=e.board,a=e.setBoard,r=e.activePiece,n=e.setActivePiece,c=e.lastKeypress,i=e.setLastKeypress,s=e.isDropping,b=e.direction,l=r,d=l.currentPosition||l.initialPosition,O="left"===b?-1:1;if(d){var f=Object.fromEntries(Object.entries(d).map((function(e){var t=Object(o.a)(e,2),a=t[0],r=Object(o.a)(t[1],2);return[a,[r[0],r[1]+O]]})));if(!s&&!Object.values(f).some((function(e){return E({board:t,moveCoordinates:e,allPieceCoordinates:Object.values(d)})}))&&Date.now()-c>=100){i(Date.now());var j=Object(u.a)(t,(function(e){Object.values(d).forEach((function(t){var a=Object(o.a)(t,2),r=a[0],n=a[1];r>=0&&(e[r][n]=v)})),Object.values(f).forEach((function(t){var a=Object(o.a)(t,2),r=a[0],n=a[1];e[r][n]=l}))}));n(Object(u.a)(l,(function(e){e.currentPosition=f}))),a(j)}}},T=function(e){for(var t=[],a=O-f;a<O;a++){if(e[a].every((function(e){return e!==v}))&&t.push(a),4===t.length)break}if(t.length>0){var r=t.length,n=t[0]-1,c=n,i=e[n];return[Object(u.a)(e,(function(t){for(;!i.every((function(e){return e===v}));)i.forEach((function(e,a){t[c][a]=v,t[c+r][a]=e})),--c,i=e[c]})),r]}return[e,0]},L=function(){var e=Math.floor(Math.random()*Math.floor(7));return j[Object.keys(j)[e]]},h={score:0,nextPiece:L(),isPaused:!0},A=Object(r.createContext)(),w=function(e,t){var a=t.type,r=t.payload;switch(a){case"RESET":return h;case"ADD_TO_SCORE":return Object(s.a)({},e,{score:e.score+r});case"SET_NEXT_PIECE":return Object(s.a)({},e,{nextPiece:L()});case"TOGGLE_PAUSE":return Object(s.a)({},e,{isPaused:!e.isPaused});default:return e}},g=function(e){var t=Object(r.useReducer)(w,h),a=Object(o.a)(t,2),c={state:a[0],dispatch:a[1]};return n.a.createElement(A.Provider,{value:c},e.children)},R=(A.Consumer,function(e){var t=e.cellValue,a=(e.row,e.column,e.cellStyles||{border:"1px solid gray",backgroundColor:t.color});return n.a.createElement("div",{style:a})}),I=function(){var e=Object(r.useState)(Array(24).fill(Array(10).fill(v))),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)(L()),s=Object(o.a)(i,2),j=s[0],p=s[1],m=Object(r.useState)(0),h=Object(o.a)(m,2),w=h[0],g=h[1],I=Object(r.useState)(!1),C=Object(o.a)(I,2),x=C[0],N=C[1],S=Object(r.useContext)(A),D=S.state,_=S.dispatch,F=D.nextPiece,H=D.isPaused,k=function(){return _({type:"SET_NEXT_PIECE"})},U=function(e){return _({type:"ADD_TO_SCORE",payload:e})};return function(e,t){var a=Object(r.useRef)();Object(r.useEffect)((function(){a.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){!function(e){var t=e.isPaused,a=e.board,r=e.setBoard,n=e.activePiece,c=e.setActivePiece,i=e.nextPiece,s=e.setNextPiece,b=e.setIsDropping,l=e.addToScore;if(!t){b(!0);var d=n,O=function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(o.a)(e,2),a=t[0],r=t[1],n=Object(o.a)(r,2);return[a,[n[0]+1,n[1]]]})))},f=d.currentPosition||d.initialPlacement,j=O(f),p=Object.values(j).some((function(e){return E({board:a,moveCoordinates:e,allPieceCoordinates:Object.values(f)})}));p&&(d=i,s(),j=O(d.initialPlacement));var m=Object(u.a)(a,(function(e){p||Object.values(f).forEach((function(t){var a=Object(o.a)(t,2),r=a[0],n=a[1];r>=0&&(e[r][n]=v)})),Object.values(j).forEach((function(t){var a=Object(o.a)(t,2),r=a[0],n=a[1];e[r][n]=d}))})),P=Object(u.a)(d,(function(e){e.currentPosition=j}));if(p){var y=T(m),L=Object(o.a)(y,2),h=L[0],A=L[1];r(h),l(5*Math.pow(10,A))}else r(m);c(P),b(!1)}}({isPaused:H,board:a,setBoard:c,activePiece:j,setActivePiece:p,setIsDropping:N,nextPiece:F,setNextPiece:k,addToScore:U})}),450),P("ArrowRight")&&y({board:a,setBoard:c,activePiece:j,setActivePiece:p,lastKeypress:w,setLastKeypress:g,isDropping:x,direction:"right"}),P("Space")&&function(e){var t=e.board,a=e.setBoard,r=e.activePiece,n=e.setActivePiece,c=e.lastKeypress,i=e.setLastKeypress,s=e.nextPiece,b=e.setNextPiece,l=e.addToScore,d=r,O=d.currentPosition||d.initialPlacement,f=function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(o.a)(e,2),a=t[0],r=Object(o.a)(t[1],2);return[a,[r[0]+1,r[1]]]})))},j=O,p=f(O);if(!(Date.now()-c<150)){for(i(Date.now());!Object.values(p).some((function(e){return E({board:t,moveCoordinates:e,allPieceCoordinates:Object.values(O)})}));)j=p,p=f(p);var m=s,P=Object(u.a)(t,(function(e){Object.values(O).forEach((function(t){var a=Object(o.a)(t,2),r=a[0],n=a[1];r>=0&&(e[r][n]=v)})),Object.values(j).forEach((function(t){var a=Object(o.a)(t,2),r=a[0],n=a[1];r>=0&&(e[r][n]=d)})),Object.values(m.initialPlacement).forEach((function(t){var a=Object(o.a)(t,2),r=a[0],n=a[1];r>=0&&(e[r][n]=m)}))})),y=T(P),h=Object(o.a)(y,2),A=h[0],w=h[1];n(m),b(L()),a(A),w>0&&l(5*Math.pow(10,w))}}({board:a,setBoard:c,activePiece:j,setActivePiece:p,lastKeypress:w,setLastKeypress:g,nextPiece:F,setNextPiece:k,addToScore:U}),P("ArrowUp")&&function(e){var t=e.board,a=e.setBoard,r=e.activePiece,n=e.setActivePiece,c=e.lastKeypress,i=e.setLastKeypress,s=e.isDropping,b=r,l=b.currentPosition||b.initialPosition,d=b.rotation(l,b.orientation),O=Object(o.a)(d,2),f=O[0],j=O[1];if(!s&&!Object.values(f).some((function(e){return E({board:t,moveCoordinates:e,allPieceCoordinates:Object.values(l)})}))&&Date.now()-c>=100){i(Date.now());var p=Object(u.a)(t,(function(e){Object.values(l).forEach((function(t){var a=Object(o.a)(t,2),r=a[0],n=a[1];r>=0&&(e[r][n]=v)})),Object.values(f).forEach((function(t){var a=Object(o.a)(t,2),r=a[0],n=a[1];e[r][n]=b}))}));n(Object(u.a)(b,(function(e){e.currentPosition=f,e.orientation=j}))),a(p)}}({board:a,setBoard:c,activePiece:j,setActivePiece:p,lastKeypress:w,setLastKeypress:g,isDropping:x}),P("ArrowLeft")&&y({board:a,setBoard:c,activePiece:j,setActivePiece:p,lastKeypress:w,setLastKeypress:g,isDropping:x,direction:"left"}),n.a.createElement("div",{className:"gameboard",style:{margin:"1em",display:"grid",gridTemplateColumns:"repeat(".concat(d,", 1fr)"),gridTemplateRows:"repeat(".concat(f,", 1fr)"),width:"".concat(d*b,"px"),height:"".concat(f*l,"px"),border:"1px solid gray"}},a.filter((function(e,t){return t>=O-f})).map((function(e,t){return e.map((function(e,a){return n.a.createElement(R,{key:"board_".concat(t,"_").concat(a),cellValue:e,row:t,column:a})}))})))},C=7,x=6,N=15,S=15,D={margin:"1em",display:"grid",gridTemplateColumns:"repeat(".concat(C,", 1fr)"),gridTemplateRows:"repeat(".concat(x,", 1fr)"),width:"".concat(C*N,"px"),height:"".concat(x*S,"px"),border:"1px solid gray"},_=new Array(x).fill(new Array(C).fill(v)),F=function(e){var t=e.piece,a=H[t.type],r=Object(u.b)(_,(function(e){a.forEach((function(a){var r=Object(o.a)(a,2),n=r[0],c=r[1];e[n][c]=t}))})),c=function(e){var t=function(e){return{backgroundColor:e.color}}(e);return e!==v&&(t=Object(s.a)({},t,{border:"1px solid gray"})),t};return n.a.createElement("div",{style:D},r.map((function(e,t){return e.map((function(e,a){return n.a.createElement(R,{key:"preview_".concat(t,"_").concat(a),cellStyles:c(e),cellValue:e,row:t,column:a})}))})))},H={T:[[2,3],[3,2],[3,3],[3,4]],Z:[[2,3],[2,4],[3,2],[3,3]],LEFT_L:[[2,2],[3,2],[3,3],[3,4]],RIGHT_L:[[2,4],[3,2],[3,3],[3,4]],LINE:[[2,2],[2,3],[2,4],[2,5]],REV_Z:[[1,1],[1,2],[2,2],[2,3]],SQUARE:[[2,3],[2,2],[3,3],[3,2]]},k=function(){var e=Object(r.useContext)(A),t=e.state,a=e.dispatch,c=t.score,i=t.nextPiece,o=t.isPaused;return n.a.createElement("div",null,n.a.createElement(F,{piece:i}),n.a.createElement("div",null,c),n.a.createElement("div",{style:{margin:"1em"}},n.a.createElement("button",{onClick:function(){return a({type:"TOGGLE_PAUSE"})},style:{backgroundColor:"#4CAF50",border:"none",color:"white",padding:"15px 32px",textAlign:"center",textDecoration:"none",display:"inline-block",fontSize:"16px"}},o?"START":"PAUSE")))},U={width:"500px",margin:"0 auto",display:"grid",gridTemplateColumns:"4fr 2fr",gridTemplateRows:"auto",justifyContent:"space-around"},Z=function(){return n.a.createElement(g,null,n.a.createElement("div",{className:"gameLayout",style:U},n.a.createElement(I,null),n.a.createElement(k,null)))};var K=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(Z,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.52eb8569.chunk.js.map